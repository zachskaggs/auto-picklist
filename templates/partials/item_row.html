<div id="item-{{ item.id }}" class="item-row {% if qty_remaining == 0 %}picked{% endif %}" data-item-id="{{ item.id }}" data-set-code="{{ item.set_code }}">
  <div class="item-main" onclick="openCard({{ item.id }})">
    <div class="item-name {% if item.printing and item.printing|lower == 'foil' %}foil-name{% endif %}">{{ item.card_name }}{% if item.collector_number %} ({{ item.collector_number }}){% endif %}</div>
    {% if item.condition %}
      <span class="badge condition-{{ item.condition|lower }}">{{ item.condition }}</span>
    {% endif %}
    {% if item.language %}<span class="badge badge-lang">{{ item.language }}</span>{% endif %}
    {% if item.printing %}
      <span class="badge {% if item.printing|lower == 'foil' %}badge-foil{% else %}badge-printing{% endif %}">{{ item.printing }}</span>
    {% endif %}
    {% if item.is_missing %}<span class="badge badge-missing">MISSING</span>{% endif %}
    {% if show_missing and item.order_refs %}
      <div class="missing-order">{{ item.order_refs }}</div>
    {% endif %}
    
  </div>
  <div class="set-code" data-set-code="{{ item.set_code }}">
    {{ item.set_code|upper }}
    {% if item.reserved_by %}<span class="reserve-badge">Reserved by {{ item.reserved_by }}</span>{% endif %}
    {% if show_reserve %}<button class="reserve-btn" onclick="reserveSet('{{ item.set_code }}')">Reserve set</button>{% endif %}
  </div>
  <div class="qty-col">{{ qty_remaining }} of {{ item.qty_required }}</div>
  <div>
    <button class="action-btn pick" hx-post="/items/{{ item.id }}/pick" hx-target="closest .item-row" hx-swap="outerHTML" onclick="showToast('Picked {{ item.card_name }}', '/items/{{ item.id }}/undo', {{ item.id }})">Picked</button>
  </div>
  <div>
    {% if item.is_missing %}
      <button class="action-btn" hx-post="/items/{{ item.id }}/unmissing" hx-target="closest .item-row" hx-swap="outerHTML">Unmissing</button>
    {% else %}
      <button class="action-btn missing" onclick="markMissing({{ item.id }})">Missing</button>
    {% endif %}
  </div>
</div>


